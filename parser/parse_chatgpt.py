#!/usr/bin/python3
# -*- coding: UTF-8 -*-
import json
import os
import openai
import time
openai.api_key = "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"
# content = "üí™ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç + –±–∏–∑–Ω–µ—Å = —Ä–µ—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ –Ω–∞—à—É –∂–∏–∑–Ω—å\n\n–î–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ. –°–µ–π—á–∞—Å –ò–¢–ú–û —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞–µ—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–µ—Å—è—Ç–∫–∞–º–∏ –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π. –í–º–µ—Å—Ç–µ –º—ã –¥–µ–ª–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π, –±–∞–Ω–∫–∏–Ω–≥–∞, —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏, —ç–ª–µ–∫—Ç—Ä–æ—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö.\n\n–ö–∞–∫ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è —ç—Ç–∏ –ø—Ä–æ–µ–∫—Ç—ã? –ö–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —É–∂–µ —É–¥–∞–ª–æ—Å—å –¥–æ—Å—Ç–∏—á—å? –ò –∫–∞–∫–∏–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã —É —Ä–∞–∑—Ä–∞–±–æ—Ç–æ–∫?\n\n–û –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ –Ω–∞—à–∏ —É—á–µ–Ω—ã–µ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–∏ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏ –≤ –∞–ø—Ä–µ–ª–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –Ω–∞—É—á–Ω–æ–º —Ñ–µ—Å—Ç–∏–≤–∞–ª–µ –ò–¢–ú–û ‚Äî ITMO Open Science Rocks ü§ü\n\n–ê –º—ã –∑–∞–ø–∏—Å–∞–ª–∏ –¥–ª—è –≤–∞—Å —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö üîº\n\n#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"


# —Ñ—É–Ω–∫—Ü–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∞—è chatgpt –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ —Ç–µ–∫—Å—Ç–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
# (–≤ —Ç.—á. —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–∞–∫ –∏ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞)
def cgpt(content):
    # —Ç–∞–∫ –∫–∞–∫ —É chatgpt –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–µ –±–æ–ª—å—à–µ —Ç—Ä–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É,
    # –∫–æ–¥ —Å—Ç–æ–∏—Ç –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏–µ 20 —Å–µ–∫—É–Ω–¥, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
    time.sleep(20)

    # —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç chatgpt,
    # –≤ —Å–ø–∏—Å–æ–∫, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    def keywords_to_list(content):
        result = content.split(", ")
        result = result[:-1]
        return result

    # –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è chatgpt, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å —Ç–µ–∫—Å—Ç–æ–º
    req = "\n–ü–µ—Ä–µ—á–∏—Å–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é."

    # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è req —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π content,
    # —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ chatgpt
    content += req

    completion = openai.ChatCompletion.create(
      model="gpt-3.5-turbo",
      messages=[
        {"role": "user", "content": content}
      ]
    )

    # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –æ—Ç–≤–µ—Ç –æ—Ç chatgpt
    response = completion.choices[0].message.content

    # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –æ—Ç–≤–µ—Ç –æ—Ç chatgpt –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–ø–∏—Å–∫–∞,
    # –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ –æ—Ç–≤–µ—Ç–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–µ–π keywords_to_list()
    result = keywords_to_list(response)

    return result